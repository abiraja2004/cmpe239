Proceedings of NAACL-HLT 2013, pages 947?957,
Atlanta, Georgia, 9?14 June 2013. c?2013 Association for Computational Linguistics
Multi-Metric Optimization Using Ensemble Tuning
Baskaran Sankaran, Anoop Sarkar
Simon Fraser University
Burnaby BC. CANADA
{baskaran,anoop}@cs.sfu.ca
Kevin Duh
Nara Institute of Science & Technology
Ikoma, Nara. JAPAN
kevinduh@is.naist.jp
Abstract
This paper examines tuning for statistical ma-
chine translation (SMT) with respect to mul-
tiple evaluation metrics. We propose several
novel methods for tuning towards multiple ob-
jectives, including some based on ensemble
decoding methods. Pareto-optimality is a nat-
ural way to think about multi-metric optimiza-
tion (MMO) and our methods can effectively
combine several Pareto-optimal solutions, ob-
viating the need to choose one. Our best
performing ensemble tuning method is a new
algorithm for multi-metric optimization that
searches for Pareto-optimal ensemble models.
We study the effectiveness of our methods
through experiments on multiple as well as
single reference(s) datasets. Our experiments
show simultaneous gains across several met-
rics (BLEU, RIBES), without any significant
reduction in other metrics. This contrasts the
traditional tuning where gains are usually lim-
ited to a single metric. Our human evaluation
results confirm that in order to produce better
MT output, optimizing multiple metrics is bet-
ter than optimizing only one.
1 Introduction
Tuning algorithms are used to find the weights for a
statistical machine translation (MT) model by min-
imizing error with respect to a single MT evalua-
tion metric. The tuning process improves the per-
formance of an SMT system as measured by this
metric; with BLEU (Papineni et al, 2002) being
the most popular choice. Minimum error-rate train-
ing (MERT) (Och, 2003) was the first approach in
MT to directly optimize an evaluation metric. Sev-
eral alternatives now exist: MIRA (Watanabe et al,
2007; Chiang et al, 2008), PRO (Hopkins and May,
2011), linear regression (Bazrafshan et al, 2012)
and ORO (Watanabe, 2012) among others.
However these approaches optimize towards the
best score as reported by a single evaluation met-
ric. MT system developers typically use BLEU and
ignore all the other metrics. This is done despite
the fact that other metrics model wide-ranging as-
pects of translation: from measuring the translation
edit rate (TER) in matching a translation output to a
human reference (Snover et al, 2006), to capturing
lexical choices in translation as in METEOR (Lavie
and Denkowski, 2009) to modelling semantic simi-
larity through textual entailment (Pado? et al, 2009)
to RIBES, an evaluation metric that pays attention
to long-distance reordering (Isozaki et al, 2010).
While some of these metrics such as TER, ME-
TEOR are gaining prominence, BLEU enjoys the
status of being the de facto standard tuning metric
as it is often claimed and sometimes observed that
optimizing with BLEU produces better translations
than other metrics (Callison-Burch et al, 2011).
The gains obtained by the MT system tuned on
a particular metric do not improve performance as
measured under other metrics (Cer et al, 2010), sug-
gesting that over-fitting to a specific metric might
happen without improvements in translation quality.
In this paper we propose a new tuning framework
for jointly optimizing multiple evaluation metrics.
Pareto-optimality is a natural way to think about
multi-metric optimization and multi-metric opti-
mization (MMO) was recently explored using the
notion of Pareto optimality in the Pareto-based
Multi-objective Optimization (PMO) approach (Duh
et al, 2012). PMO provides several equivalent solu-
tions (parameter weights) having different trade-offs
between the different MT metrics. In (Duh et al,
2012) the choice of which option to use rests with
the MT system developer and in that sense their ap-
proach is an a posteriori method to specify the pref-
erence (Marler and Arora, 2004).
In contrast to this, our tuning framework pro-
vides a principled way of using the Pareto optimal
options using ensemble decoding (Razmara et al,
2012). We also introduce a novel method of ensem-
ble tuning for jointly tuning multiple MT evaluation
metrics and further combine this with the PMO ap-
947
proach (Duh et al, 2012). We also introduce three
other approaches for multi-metric tuning and com-
pare their performance to the ensemble tuning. Our
experiments yield the highest metric scores across
many different metrics (that are being optimized),
something that has not been possible until now.
Our ensemble tuning method over multiple met-
rics produced superior translations than single met-
ric tuning as measured by a post-editing task.
HTER (Snover et al, 2006) scores in our human
evaluation confirm that multi-metric optimization
can lead to better MT output.
2 Related Work
In grammar induction and parsing (Spitkovsky et al,
2011; Hall et al, 2011; Auli and Lopez, 2011) have
proposed multi-objective methods based on round-
robin iteration of single objective optimizations.
Research in SMT parameter tuning has seen a
surge of interest recently, including online/batch
learning (Watanabe, 2012; Cherry and Foster, 2012),
large-scale training (Simianer et al, 2012; He
and Deng, 2012), and new discriminative objec-
tives (Gimpel and Smith, 2012; Zheng et al, 2012;
Bazrafshan et al, 2012). However, few works
have investigated the multi-metric tuning problem in
depth. Linear combination of BLEU and TER is re-
ported in (Zaidan, 2009; Dyer et al, 2009; Servan
and Schwenk, 2011); an alternative is to optimize on
BLEU with MERT while enforcing that TER does
not degrade per iteration (He and Way, 2009). Stud-
ies on metric tunability (Liu et al, 2011; Callison-
Burch et al, 2011; Chen et al, 2012) have found
that the metric used for evaluation may not be the
best metric used for tuning. For instance, (Mauser et
al., 2008; Cer et al, 2010) report that tuning on lin-
ear combinations of BLEU-TER is more robust than
a single metric like WER.
The approach in (Devlin and Matsoukas, 2012)
modifies the optimization function to include traits
such as output length so that the hypotheses pro-
duced by the decoder have maximal score according
to one metric (BLEU) but are subject to an output
length constraint, e.g. that the output is 5% shorter.
This is done by rescoring an N-best list (forest) for
the metric combined with each trait condition and
then the different trait hypothesis are combined us-
ing a system combination step. The traits are in-
dependent of the reference (while tuning). In con-
trast, our method is able to combine multiple metrics
(each of which compares to the reference) during the
tuning step and we do not depend on N-best list (or
forest) rescoring or system combination.
Duh et. al. (2012) proposed a Pareto-based ap-
proach to SMT multi-metric tuning, where the lin-
ear combination weights do not need to be known in
advance. This is advantageous because the optimal
weighting may not be known in advance. However,
the notion of Pareto optimality implies that multiple
?best? solutions may exist, so the MT system devel-
oper may be forced to make a choice after tuning.
These approaches require the MT system devel-
oper to make a choice either before tuning (e.g. in
terms of linear combination weights) or afterwards
(e.g. the Pareto approach). Our method here is dif-
ferent in that we do not require any choice. We
use ensemble decoding (Razmara et al, 2012) (see
sec 3) to combine the different solutions resulting
from the multi-metric optimization, providing an el-
egant solution for deployment. We extend this idea
further and introduce ensemble tuning, where the
metrics have separate set of weights. The tuning
process alternates between ensemble decoding and
the update step where the weights for each metric
are optimized separately followed by joint update of
metric (meta) weights.
3 Ensemble Decoding
We now briefly review ensemble decoding (Razmara
et al, 2012) which is used as a component in the al-
gorithms we present. The prevalent model of statis-
tical MT is a log-linear framework using a vector of
feature functions ?:
p(e|f) ? exp
(
w ? ?
)
(1)
The idea of ensemble decoding is to combine sev-
eral models dynamically at decode time. Given mul-
tiple models, the scores are combined for each par-
tial hypothesis across the different models during
decoding using a user-defined mixture operation ?.
p(e|f) ? exp
(
w1 ? ?1 ? w2 ? ?2 ? . . .
)
(2)
(Razmara et al, 2012) propose several mixture
operations, such as log-wsum (simple linear mix-
ture), wsum (log-linear mixture) and max (choose lo-
948
cally best model) among others. The different mix-
ture operations allows the user to encode the be-
liefs about the relative strengths of the models. It
has been applied successfully for domain adaptation
setting and shown to perform better approaches that
pre-compute linear mixtures of different models.
4 Multi-Metric Optimization
In statistical MT, the multi-metric optimization
problem can be expressed as:
w? = argmax
w
g
(
[M1(H), . . . ,Mk(H)]
)
(3)
where H = N (f ;w)
where N (f ;w) is the decoding function generating
a set of candidate hypotheses H based on the model
parameters w, for the source sentences f . For each
source sentence fi ? f there is a set of candidate
hypotheses {hi} ? H . The goal of the optimiza-
tion is to find the weights that maximize the func-
tion g(.) parameterized by different evaluation met-
rics M1, . . . ,Mk.
For the Pareto-optimal based approach such as
PMO (Duh et al, 2012), we can replace g(?) above
with gPMO(?) which returns the points in the Pareto
frontier. Alternately a weighted averaging function
gwavg(?) would result in a linear combination of the
metrics being considered, where the tuning method
would maximize the joint metric. This is similar to
the (TER-BLEU)/2 optimization (Cer et al, 2010;
Servan and Schwenk, 2011).
We introduce four methods based on the above
formulation and each method uses a different type
of g(?) function for combining different metrics and
we compare experimentally with existing methods.
4.1 PMO Ensemble
PMO (Duh et al, 2012) seeks to maximize the num-
ber of points in the Pareto frontier of the metrics con-
sidered. The inner routine of the PMO-PRO tuning
is described in Algorithm 1. This routine is con-
tained within an outer loop that iterates for a fixed
number iterations of decoding the tuning set and op-
timizing the weights.
The tuning process with PMO-PRO is inde-
pendently repeated with different set of weights
for metrics1 yielding a set of equivalent solutions
1For example Duh et al (2012) use five different weight
Algorithm 1 PMO-PRO (Inner routine for tuning)
1: Input: Hypotheses H = N (f ;w); Weights w
2: Initialize T = {}
3: for each f in tuning set f do
4: {h} = H(f)
5: {M({h})} = ComputeMetricScore({h}, e?)
6: {F} = FindParetoFrontier({M({h})})
7: for each h in {h} do
8: if h ? F then add (1, h) to T
9: else add (`, h) to T (see footnote 1)
10: wp ? PRO(T ) (optimize using PRO)
11: Output: Pareto-optimal weights wp
{ps1 , . . . , psn} which are points on the Pareto fron-
tier. The user then chooses one solution by making a
trade-off between the performance gains across dif-
ferent metrics. However, as noted earlier this a pos-
teriori choice ignores other solutions that are indis-
tinguishable from the chosen one.
We alleviate this by complementing PMO with
ensemble decoding, which we call PMO ensemble,
in which each point in the Pareto solution is a dis-
tinct component in the ensemble decoder. This idea
can also be used in other MMO approaches such as
linear combination of metrics (gwavg(.)) mentioned
above. In this view, PMO ensemble is a special case
of ensemble combination, where the decoding is per-
formed by an ensemble of optimal solutions.
The ensemble combination model introduces new
hyperparameters ? that are the weights of the en-
semble components (meta weights). These ensem-
ble weights could set to be uniform in a na??ve
implementation. Or the user can encode her be-
liefs or expectations about the individual solutions
{ps1 , . . . , psn} to set the ensemble weights (based
on the relative importance of the components). Fi-
nally, one could also include a meta-level tuning step
to set the weights ?.
The PMO ensemble approach is graphically il-
lustrated in Figure 1; we will also refer to this fig-
ure while discussing other methods.2 The orig-
settings for metrics (M1,M2), viz. (0.0, 1.0), (0.3, 0.7),
(0.5, 0.5), (0.7, 0.3) and (1.0, 0.0). They combine the met-
ric weights qi with the sentence-level metric scores Mi as
` =
(?
k qkMk
)
/k where ` is the target value for negative
examples (the else line in Alg 1) in the optimization step.
2The illustration is based on two metrics, metric-1 and
metric-2, but could be applied to any number of metrics. With-
out loss of generality we assume accuracy metrics, i.e. higher
949
Me
tric
?2
Metric?1
Figure 1: Illustration of different MMO approaches involving
two metrics. Solid (red) arrows indicate optimizing two met-
rics independently and the dashed (green) arrow optimize them
jointly. The Pareto frontier is indicated by the curve.
inal PMO-PRO seeks to maximize the points on
the Pareto frontier (blue curve in the figure) lead-
ing to Pareto-optimal solutions. On the other hand,
the PMO ensemble combines the different Pareto-
optimal solutions and potentially moving in the di-
rection of dashed (green) arrows to some point that
has higher score in either or both dimensions.
4.2 Lateen MMO
Lateen EM has been proposed as a way of jointly
optimizing multiple objectives in the context of de-
pendency parsing (Spitkovsky et al, 2011). It uses
a secondary hard EM objective to move away, when
the primary soft EM objective gets stuck in a local
optima. The course correction could be performed
under different conditions leading to variations that
are based on when and how often to shift from one
objective function to another during optimization.
The lateen technique can be applied to the multi-
metric optimization in SMT by treating the differ-
ent metrics as different objective functions. While
the several lateen variants are also applicable for our
task, our objective here is to improve performance
across the different metrics (being optimized). Thus,
we restrict ourselves to the style where the search
alternates between the metrics (in round-robin fash-
ion) at each iteration. Since the notion of conver-
gence is unclear in lateen setting, we stop after a
fixed number of iterations optimizing the tuning set.
In terms of Figure 1, lateen MMO corresponds to al-
ternately maximizing the metrics along two dimen-
sions as depicted by the solid arrows.
By the very nature of lateen-alternation, the
metric score is better.
weights obtained at each iteration are likely to be
best for the metric that was optimized in that itera-
tion. Thus, one could use weights from the last k
iterations (for lateen-tuning with as many metrics)
and then decode the test set with an ensemble of
these weights as in PMO ensemble. However in
practice we find the weights to converge and we sim-
ply use the weights from the final iteration to decode
the test set in our lateen experiments.
4.3 Union of Metrics
At each iteration lateen MMO excludes all but one
metric for optimization. An alternative would be to
consider all the metrics at each iteration so that the
optimizer could try to optimize them jointly. This
has been the general motivation for considering the
linear combination of metrics (Cer et al, 2010; Ser-
van and Schwenk, 2011) resulting in a joint metric,
which is then optimized.
However due to the scaling differences between
the scores of different metrics, the linear combi-
nation might completely suppress the metric hav-
ing scores in the lower-range. As an example, the
RIBES scores that are typically in the high 0.7-0.8
range, dominate the BLEU scores that is typically
around 0.3. While the weighted linear combination
tries to address this imbalance, they introduce ad-
ditional parameters that are manually fixed and not
separately tuned.
We avoid this linear combination pitfall by taking
the union of the metrics under which we consider
the union of training examples from all metrics and
optimize them jointly. Mathematically,
w? = argmax
w
g(M1(H)) ? . . . ? g(Mk(H)) (4)
Most of the optimization approaches involve two
phases: i) select positive and negative examples and
ii) optimize parameters to favour positive examples
while penalizing negative ones. In the union ap-
proach, we independently generate positive and neg-
ative sets of examples for all the metrics and take
their union. The optimizer now seeks to move to-
wards positive examples from all metrics, while pe-
nalizing others.
This is similar to the PMO-PRO approach except
that here the optimizer tries to simultaneously max-
imize the number of high scoring points across all
950
metrics. Thus, instead of the entire Pareto frontier
curve in Figure 1, the union approach optimizes the
two dimensions simultaneously in each iteration.
5 Ensemble Tuning
These methods, even though novel, under utilize the
power of ensembles as they combine the solution
only at the end of the tuning process. We would
prefer to tightly integrate the idea of ensembles into
the tuning. We thus extend the ensemble decoding
to ensemble tuning. The feature weights are repli-
cated separately for each evaluation metric, which
are treated as components in the ensemble decoding
and tuned independently in the optimization step.
Initially the ensemble decoder decodes a devset us-
ing a weighted ensemble to produce a single N-best
list. For the optimization, we employ a two-step ap-
proach of optimizing the feature weights (of each
ensemble component) followed by a step for tun-
ing the meta (component) weights. The optimized
weights are then used for decoding the devset in the
next iteration and the process is repeated for a fixed
number of iterations.
Modifying the MMO representation in Equa-
tion 3, we formulate ensemble tuning as:
Hens = Nens
(
f ; {wM};?;?
)
(5)
w? =
{
argmax
wMi
Hens | 1?i?k
}
(6)
? = argmax
?
g ({Mi(Hens)|1?i?k} ;w?) (7)
Here the ensemble decoder function Nens(.)
is parameterized by an ensemble of weights
wM1 , . . . , wMk (denoted as {wM} in Eq 5) for each
metric and a mixture operation (?). ? represents the
weights of the ensemble components.
Pseudo-code for ensemble tuning is shown in Al-
gorithm 2. In the beginning of each iteration (line 2),
the tuning process ensemble decodes (line 4) the
tuning set using the weights obtained from the pre-
vious iteration. Equation 5 gives the detailed expres-
sion for the ensemble decoding, whereHens denotes
the N-best list generated by the ensemble decoder.
The method now uses a dual tuning strategy in-
volving two phases to optimize the weights. In the
first step it optimizes each of the k metrics indepen-
dently (lines 6-7) along its respective dimension in
Algorithm 2 Ensemble Tuning Algorithm
1: Input: Tuning set f ,
Metrics M1, . . . ,Mk (ensemble components)
Initial weights {wM} ? wM1 , . . . wMk and
Component (meta) weights ?
2: for j = 1, . . . do
3: {w(j)M } ? {wM}
4: Ensemble decode the tuning set
Hens = Nens(f ; {w
(j)
M };?;?)
5: {wM} = {}
6: for each metric Mi ? {M} do
7: w?Mi ? PRO(Hens, wMi) (use PRO)
8: Add w?Mi to {wM}
9: ?? PMO-PRO(Hens, {wM}) (Alg 1)
10: Output: Optimal weights {wM} and ?
the multi-metric space (as shown by the solid arrows
along the two axes in Figure 1). This yields a new
set of weights w? for the features in each metric.
The second tuning step (line 9) then optimizes
the meta weights (?) so as to maximize the multi-
metric objective along the joint k-dimensional space
as shown in Equation 7. This is illustrated by the
dashed arrows in the Figure 1. While g(.) could be
any function that combines multiple metrics, we use
the PMO-PRO algorithm (Alg. 1) for this step.
The main difference between ensemble tuning and
PMO ensemble is that the former is an ensemble
model over metrics and the latter is an ensemble
model over Pareto solutions. Additionally, PMO en-
semble uses the notion of ensembles only for the fi-
nal decoding after tuning has completed.
5.1 Implementation Notes
All the proposed methods fit naturally within the
usual SMT tuning framework. However, some
changes are required in the decoder to support en-
semble decoding and in the tuning scripts for op-
timizing with multiple metrics. For ensemble de-
coding, the decoder should be able to use multiple
weight vectors and dynamically combine them ac-
cording to some desired mixture operation. Note
that, unlike Razmara et al (2012), our approach uses
just one model but has different weight vectors for
each metric and the required decoder modifications
are simpler than full ensemble decoding.
While any of the mixture operations proposed
by Razmara et al (2012) could be used, in this pa-
951
per we use log-wsum ? the linear combination of the
ensemble components and log-wmax ? the combina-
tion that prefers the locally best component. These
are simpler to implement and also performed com-
petitively in their domain adaptation experiments.
Unless explicitly noted otherwise, the results pre-
sented in Section 6 are based on linear mixture oper-
ation log-wsum, which empirically performed better
than the log-wmax for ensemble tuning.
6 Experiments
We evaluate the different methods on Arabic-
English translation in single as well as multiple ref-
erences scenario. Corpus statistics are shown in
Table 1. For all the experiments in this paper,
we use Kriya, our in-house Hierarchical phrase-
based (Chiang, 2007) (Hiero) system, and inte-
grated the required changes for ensemble decoding.
Kriya performs comparably to the state of the art in
phrase-based and hierarchical phrase-based transla-
tion over a wide variety of language pairs and data
sets (Sankaran et al, 2012).
We use PRO (Hopkins and May, 2011) for op-
timizing the feature weights and PMO-PRO (Duh
et al, 2012) for optimizing meta weights, wher-
ever applicable. In both cases, we use SVM-
Rank (Joachims, 2006) as the optimizer.
We used the default parameter settings for dif-
ferent MT tuning metrics. For METEOR, we tried
both METEOR-tune and METEOR-hter settings
and found the latter to perform better in BLEU and
TER scores, even though the former was marginally
better in METEOR3 and RIBES scores. We ob-
served the margin of loss in BLEU and TER to out-
weigh the gains in METEOR and RIBES and we
chose METEOR-hter setting for both optimization
and evaluation of all our experiments.
6.1 Evaluation on Tuning Set
Unlike conventional tuning methods, PMO (Duh et
al., 2012) was originally evaluated on the tuning set
to avoid potential mismatch with the test set. In
order to ensure robustness of evaluation, they re-
decode the devset using the optimal weights from
the last tuning iteration and report the scores on 1-
3This behaviour was also noted by Denkowski and Lavie
(2011) in their analysis of Urdu-English system for tunable met-
rics task in WMT11.
best candidates.
Corpus Training size Tuning/ test set
ISI corpus 1.1 M
1664/ 1313 (MTA)
1982/ 987 (ISI)
Table 1: Corpus Statistics (# of sentences) for Arabic-English.
MTA (4-refs) and ISI (1-ref).
We follow the same strategy and compare our
PMO-ensemble approach with PMO-PRO (denoted
P) and a linear combination4 (denoted L) base-
line. Similar to Duh et al (2012), we use
five different BLEU:RIBES weight settings, viz.
(0.0, 1.0), (0.3, 0.7), (0.5, 0.5), (0.7, 0.3) and
(1.0, 0.0), marked L1 through L5 or P1 through P5.
The Pareto frontier is then computed from 80 points
(5 runs and 15 iterations per run) on the devset.
Figure 2(a) shows the Pareto frontier of L and P
baselines using BLEU and RIBES as two metrics.
The frontier of the P dominates that of L for most
part showing that the PMO approach benefits from
picking Pareto points during the optimization.
We use the PMO-ensemble approach to combine
the optimized weights from the 5 tuning runs and
re-decode the devset employing ensemble decoding.
This yields the points LEns and PEns in the plot,
which obtain better scores than most of the indi-
vidual runs of L and P. This ensemble approach of
combining the final weights also generalizes to the
unseen test set as we show later.
Figure 2(b) plots the change in BLEU during tun-
ing in the multiple references and the single refer-
ence scenarios. We show for each baseline method L
and P, plots for two different weight settings that ob-
tain high BLEU and RIBES scores. In both datasets,
our ensemble tuning approach dominates the curves
of the (L and P) baselines. In summary, these results
confirm that the ensemble approach achieves results
that are competitive with previous MMO methods
on the devset Pareto curve. We now provide a more
comprehensive evaluation on the test set.
6.2 Evaluation on Test Set
This section contains multi-metric optimization re-
sults on the unseen test sets, one test set has multi-
ple references and the other has a single-reference.
4Linear combination is a generalized version of the com-
bined (TER-BLEU)/2 metric and its variants.
952
 0.765
 0.766
 0.767
 0.768
 0.769
 0.77
 0.771
 0.772
 0.773
 0.33  0.335  0.34  0.345  0.35
R
I
B
E
S
BLEU
 L1
 L2
L3  L4  
 L5
P1   P2 P3
 P4 P5
LEns  
 PEns
PMO-PROLin-Comb
(a) Pareto frontier and BLEU-RIBES scores: MTA 4-refs devset
 0.26
 0.28
 0.3
 0.32
 0.34
 0.36
 0.38
 2  4  6  8  10  12  14
B
L
E
U
Iterations
L1-mtaL5-mtaP1-mtaP5-mtaEns-Tune-mtaL1-isiL3-isiP1-isiP3-isiEns-Tune-isi
(b) Tuning BLEU scores: MTA 4-refs and ISI 1-ref devsets
Figure 2: Devset (redecode): Comparison of Lin-comb (L) and PMO-PRO (P) with Ensemble decoding (Lens and PEns) and
Ensemble tuning (Ens-Tune)
We plot BLEU scores against other metrics (RIBES,
METEOR and TER) and this allows us to compare
the performance of each metric relative to the de-
facto standard BLEU metric.
Baseline points are identified by single letters B
for BLEU, T for TER, etc. and the baseline (single-
metric optimized) score for each metric is indicated
by a dashed line on the corresponding axis. MMO
points use a series of single letters referring to the
metrics used, e.g. BT for BLEU-TER. The union of
metrics method is identified with the suffix ?J? and
lateen method with suffix ?L? (thus BT-L refers to the
lateen tuning with BLEU-TER). MMO points with-
out any suffix use the ensemble tuning approach.
Figures 3 and 4(a) plot the scores for the MTA test
set with 4-references. We see noticeable and some
statistically significant improvements in BLEU and
RIBES (see Table 2 for BLEU improvements).
All our MMO approaches, except for the union
method, show gains on both BLEU and RIBES axes.
Figures 3(b) and 4(a) show that none of the proposed
methods managed to improve the baseline scores for
METEOR and TER. However, several of our en-
semble tuning combinations work well for both ME-
TEOR (BR, BMRTB3, etc.) and TER (BMRT and
BRT) in that they improved or were close to the
baseline scores in either dimension. We again see in
these figures that the MMO approaches can improve
the BLEU-only tuning by 0.3 BLEU points, without
much drop in other metrics. This is in tune with the
finding that BLEU could be tuned easily (Callison-
Burch et al, 2011) and also explains why it remains
Approach and Tuning Metric(s)
BLEU
MTA ISI
Single Objective Baselines
BLEU 36.06 37.20
METEOR 35.05 36.91
RIBES 33.35 36.60
TER 33.92 35.85
Ensemble Tuning: 2 Metrics
B-M 36.02 37.26
B-R 36.15 37.37
B-T 35.72 36.31
Ensemble Tuning: 3 Metrics
B-M-R 36.36 37.37
B-M-T 36.22 36.89
B-R-T 35.97 36.72
Ensemble Tuning: > 3 Metrics
B-M-R-T 35.94 36.84
B-M-R-T-B3 36.16 37.12
B-M-R-T-B3-B2-B1 36.08 37.24
Table 2: BLEU Scores on MTA (4 refs) and ISI (1 ref) test sets
using the standard mteval script. Boldface scores indicate scores
that are comparable to or better than the baseline BLEU-only
tuning. Italicized scores indicate statistically significant differ-
ences at p-value 0.05 computed with bootstrap significance test.
a popular choice for optimizing SMT systems.
Among the different MMO methods the ensem-
ble tuning performs better than lateen or union ap-
proaches. In terms of the number of metrics being
optimized jointly, we see substantial gains when us-
ing a small number (typically 2 or 3) of metrics. Re-
sults seem to suffer beyond this number; probably
because there might not be a space that contain so-
lution(s) optimal for all the metrics that are jointly
optimized.
We hypothesize that each metric correlates well
953
 0.808
 0.81
 0.812
 0.814
 0.816
 0.818
 0.82
 0.33  0.335  0.34  0.345  0.35  0.355  0.36  0.365  0.37
R
I
B
E
S
BLEU
 B
 M
 R
 T  PEns
 LEns
BM 
BR  
 BT
MR  
 BMR
 BMT
 BRT
BMRT  
 BMRTB3
 BMRTB3B2B1
 BM-J
 BR-J
 BT-J
BMT-J  
 BM-L
BR-L  
BMR-L  
(a) BLEU-RIBES scores
 0.495
 0.5
 0.505
 0.51
 0.515
 0.52
 0.33  0.335  0.34  0.345  0.35  0.355  0.36  0.365  0.37
M
E
T
E
O
R
BLEU
B
 M
 R
 T
 PEns(BR)
LEns(BR)  BM  BR
 BT
MR  
 BMR
 BMT
 BRT
 BMRTB3BMRTB3B2B1  
 BM-J
 BR-J
 BT-J
BMT-J  
 BM-L
BR-L  
BMR-L  
(b) BLEU-METEOR scores
Figure 3: MTA 4-refs testset: Comparison of different MMO approaches. The dashed lines correspond to baseline scores tuned on
the respective metrics in the axes. The union of metrics method is identified with the suffix J and lateen with suffix L.
 0.4
 0.405
 0.41
 0.415
 0.42
 0.425
 0.43
 0.435
 0.33  0.335  0.34  0.345  0.35  0.355  0.36  0.365  0.37
n
T
E
R
BLEU
B  
 M
 R
 T
 PEns(BR)
LEns(BR)  
BM   BR
 BT
MR   BMR
 BMTBRT  
 BMRT
 BMRTB3
 BM-J
BR-J  
 BT-J BMT-J  
BM-L  
BR-L  
BMR-L  
(a) MTA (4-refs)
 0.44
 0.445
 0.45
 0.455
 0.46
 0.465
 0.355  0.36  0.365  0.37  0.375
n
T
E
R
BLEU
B  
M  
 R
 T
PEns(BR)   LEns(BR)
  BM
 BR
 BMR
 B3MT
BRT  
BMRT  
 BMRTB3
BMRTB3B2B1  
 BR-J
BR-L  
(b) ISI (1-ref)
Figure 4: BLEU-TER scores: Comparison of different MMO approaches. We plot nTER (1-TER) scores for easy reading of the
plots. The dashed lines correspond to baseline scores tuned on the respective metrics in the axes.
(in a looser sense) with few others, but not all. For
example, union optimizations BR-J and BMT-J per-
form close to or better than RIBES and TER base-
lines, but get very poor score in METEOR. On the
other hand BM-J is close to the METEOR baseline,
while doing poorly on the RIBES and TER. This be-
haviour is also evident from the single-metric base-
lines, where R and T-only settings are clearly distin-
guished from the M-only system. It is not clear if
such distinct classes of metrics could be bridged by
some optimal solution and the metric dichotomy re-
quires further study as this is key to practical multi-
metric tuning in SMT.
The lateen and union approaches appear to be
very sensitive to the number of metrics and they
generally perform well for two metrics case and
show degradation for more metrics. Unlike other
approaches, the union approach failed to improve
over the baseline BLEU and this could be attributed
to the conflict of interest among the metrics, while
choosing example points for the optimization step.
The positive example preferred by a particular met-
ric could be a negative example for the other metric.
This would only confuse the optimizer resulting in
poor solutions. Our future line of work would be to
study the effect of avoiding such of conflicting ex-
amples in the union approach.
For the single-reference (ISI) dataset, we only
plot the BLEU-TER case in Figure 4(b) due to lack
of space. The results are similar to the multiple
references set indicating that MMO approaches are
equally effective for single references5. Table 2
5One could argue that MMO methods require multiple ref-
erences since each metric might be picking out a different ref-
954
Metric
Single-metric Tuning Ensemble Tuning
B-only M-only B-M-R
BLEU 37.89 37.18 39.01
HBLEU 51.93 53.59 53.14
METEOR 61.31 61.56 61.68
HMETEOR 72.35 72.39 72.74
TER 0.520 0.532 0.516
HTER 0.361 0.370 0.346
Table 3: Post-editing Human Evaluation: Regular (untargeted)
and human-targeted scores. Human targeted scores are com-
puted against the post-edited reference and regular scores are
computed with the original references. Best scores are in bold-
face and statistically significant ones (at p = 0.05) are italicized.
shows the BLEU scores for our ensemble tuning
method (for various combinations) and we again see
improvements over the baseline BLEU-only tuning.
6.3 Human Evaluation
So far we have shown that multi-metric optimiza-
tion can improve over single-metric tuning on a sin-
gle metric like BLEU and we have shown that our
methods find a tuned model that performs well with
respect to multiple metrics. Is the output that scores
higher on multiple metrics actually a better trans-
lation? To verify this, we conducted a post-editing
human evaluation experiment. We compared our en-
semble tuning approach involving BLEU, METEOR
and RIBES (B-M-R) with systems optimized for
BLEU (B-only) and METEOR (M-only).
We selected 100 random sentences (that are at
least 15 words long) from the Arabic-English MTA
(4 references) test set and translated them using the
three systems (two single metric systems and BMR
ensemble tuning). We shuffled the resulting trans-
lations and split them into 3 sets such that each set
has equal number of the translations from three sys-
tems. The translations were edited by three human
annotators in a post-editing setup, where the goal
was to edit the translations to make them as close
to the references as possible, using the Post-Editing
Tool: PET (Aziz et al, 2012). The annotators were
not Arabic-literate and relied only on the reference
translations during post-editing. The identifiers that
link each translation to the system that generated it
are removed to avoid annotator bias.
In the end we collated post-edited translations for
each system and then computed the system-level
erence sentence. Our experiment shows that even with a single
reference MMO methods can work.
human-targeted (HBLEU, HMETEOR, HTER)
scores, by using respective post-edited translations
as the reference. First comparing the HTER (Snover
et al, 2006) scores shown in Table 3, we see
that the single-metric system optimized for ME-
TEOR performs slightly worse than the one op-
timized for BLEU, despite using METEOR-hter
version (Denkowski and Lavie, 2011). Ensemble
tuning-based system optimized for three metrics (B-
M-R) improves HTER by 4% and 6.3% over BLEU
and METEOR optimized systems respectively.
The single-metric system tuned with M-only set-
ting scores high on HBLEU, closely followed by the
ensemble system. We believe this to be caused by
chance rather than any systematic gains by the M-
only tuning; the ensemble system scores high on
HMETEOR compared to the M-only system. While
HTER captures the edit distance to the targeted ref-
erence, HMETEOR and HBLEU metrics capture
missing content words or synonyms by exploiting
n-grams and paraphrase matching.
We also computed the regular variants (BLEU,
METEOR and TER), which are scored against orig-
inal references. The ensemble system outperformed
the single-metric systems in all the three metrics.
The improvements were also statistically significant
at p-value of 0.05 for BLEU and TER.
7 Conclusion
We propose and present a comprehensive study of
several multi-metric optimization (MMO) methods
in SMT. First, by exploiting the idea of ensemble de-
coding (Razmara et al, 2012), we propose an effec-
tive way to combine multiple Pareto-optimal model
weights from previous MMO methods (e.g. Duh et
al. (2012)), obviating the need for manually trading
off among metrics. We also proposed two new vari-
ants: lateen-style MMO and union of metrics.
We also extended ensemble decoding to a new
tuning algorithm called ensemble tuning. This
method demonstrates statistically significant gains
for BLEU and RIBES with modest reduction in ME-
TEOR and TER. Further, in our human evaluation,
ensemble tuning obtains the best HTER among com-
peting baselines, confirming that optimizing on mul-
tiple metrics produces human-preferred translations
compared to the conventional optimization approach
involving a single metric.
955
References
Michael Auli and Adam Lopez. 2011. Training a log-
linear parser with loss functions via softmax-margin.
In Proceedings of the 2011 Conference on Empirical
Methods in Natural Language Processing, pages 333?
343, Edinburgh, Scotland, UK., July. Association for
Computational Linguistics.
Wilker Aziz, Sheila Castilho Monteiro de Sousa, and
Lucia Specia. 2012. PET: a tool for post-editing
and assessing machine translation. In Proceed-
ings of the Eight International Conference on Lan-
guage Resources and Evaluation (LREC?12), Istanbul,
Turkey, may. European Language Resources Associa-
tion (ELRA).
Marzieh Bazrafshan, Tagyoung Chung, and Daniel
Gildea. 2012. Tuning as linear regression. In Pro-
ceedings of the 2012 Conference of the North Ameri-
can Chapter of the ACL: Human Language Technolo-
gies, pages 543?547, Montre?al, Canada. ACL.
Chris Callison-Burch, Philipp Koehn, Christof Monz,
and Omar Zaidan. 2011. Findings of the 2011 work-
shop on statistical machine translation. In Proceedings
of the Sixth Workshop on Statistical Machine Transla-
tion, pages 22?64, Edinburgh, Scotland, July. ACL.
Daniel Cer, Christopher D. Manning, and Daniel Juraf-
sky. 2010. The best lexical metric for phrase-based
statistical mt system optimization. In Human Lan-
guage Technologies: The 2010 Annual Conference of
the North American Chapter of the ACL, pages 555?
563. ACL.
Boxing Chen, Roland Kuhn, and Samuel Larkin. 2012.
Port: a precision-order-recall mt evaluation metric for
tuning. In Proceedings of the 50th Annual Meeting
of the ACL (Volume 1: Long Papers), pages 930?939,
Jeju Island, Korea. ACL.
Colin Cherry and George Foster. 2012. Batch tuning
strategies for statistical machine translation. In Pro-
ceedings of the 2012 Conference of the North Ameri-
can Chapter of the ACL: Human Language Technolo-
gies, pages 427?436, Montre?al, Canada. ACL.
David Chiang, Yuval Marton, and Philip Resnik. 2008.
Online large-margin training of syntactic and struc-
tural translation features. In Proceedings of the Con-
ference on Empirical Methods in Natural Language
Processing, pages 224?233. ACL.
David Chiang. 2007. Hierarchical phrase-based transla-
tion. Computational Linguistics, 33.
Michael Denkowski and Alon Lavie. 2011. Meteor
1.3: Automatic Metric for Reliable Optimization and
Evaluation of Machine Translation Systems. In Pro-
ceedings of the Sixth Workshop on Statistical Machine
Translation, Edinburgh, Scotland, July. ACL.
Jacob Devlin and Spyros Matsoukas. 2012. Trait-based
hypothesis selection for machine translation. In Pro-
ceedings of the 2012 Conference of the North Ameri-
can Chapter of the ACL: Human Language Technolo-
gies, pages 528?532. ACL.
Kevin Duh, Katsuhito Sudoh, Xianchao Wu, Hajime
Tsukada, and Masaaki Nagata. 2012. Learning to
translate with multiple objectives. In Proceedings of
the 50th Annual Meeting of the ACL, Jeju Island, Ko-
rea. ACL.
Chris Dyer, Hendra Setiawan, Yuval Marton, and Philip
Resnik. 2009. The university of maryland statistical
machine translation system for the fourth workshop on
machine translation. In Proc. of the Fourth Workshop
on Machine Translation.
Kevin Gimpel and Noah A. Smith. 2012. Struc-
tured ramp loss minimization for machine transla-
tion. In Proceedings of the 2012 Conference of
the North American Chapter of the ACL: Human
Language Technologies, pages 221?231, Montre?al,
Canada. ACL.
Keith Hall, Ryan T. McDonald, Jason Katz-Brown, and
Michael Ringgaard. 2011. Training dependency
parsers by jointly optimizing multiple objectives. In
Proceedings of the Empirical Methods in Natural Lan-
guage Processing, pages 1489?1499.
Xiaodong He and Li Deng. 2012. Maximum expected
bleu training of phrase and lexicon translation mod-
els. In Proceedings of the 50th Annual Meeting of
the Association for Computational Linguistics (Vol-
ume 1: Long Papers), pages 292?301, Jeju Island, Ko-
rea. ACL.
Yifan He and Andy Way. 2009. Improving the objec-
tive function in minimum error rate training. In MT
Summit.
Mark Hopkins and Jonathan May. 2011. Tuning as rank-
ing. In Proceedings of the 2011 Conference on Empir-
ical Methods in Natural Language Processing, Edin-
burgh, Scotland. ACL.
Hideki Isozaki, Tsutomu Hirao, Kevin Duh, Katsuhito
Sudoh, and Hajime Tsukada. 2010. Automatic evalu-
ation of translation quality for distant language pairs.
In Proceedings of the 2010 Conference on Empirical
Methods in Natural Language Processing, pages 944?
952, Cambridge, MA. ACL.
Thorsten Joachims. 2006. Training linear svms in linear
time. In Proceedings of the 12th ACM SIGKDD inter-
national conference on Knowledge discovery and data
mining, pages 217?226.
Alon Lavie and Michael J. Denkowski. 2009. The me-
teor metric for automatic evaluation of machine trans-
lation. Machine Translation, 23(2-3):105?115.
956
Chang Liu, Daniel Dahlmeier, and Hwee Tou Ng. 2011.
Better evaluation metrics lead to better machine trans-
lation. In Proceedings of the Conference on Empirical
Methods in Natural Language Processing.
R. T. Marler and J. S. Arora. 2004. Survey of
multi-objective optimization methods for engineer-
ing. Structural and Multidisciplinary Optimization,
26(6):369?395, April.
Arne Mauser, Sas?a Hasan, and Hermann Ney. 2008.
Automatic evaluation measures for statistical machine
translation system optimization. In International Con-
ference on Language Resources and Evaluation, Mar-
rakech, Morocco.
Franz Josef Och. 2003. Minimum error rate training in
statistical machine translation. In Proceedings of the
41st Annual Meeting of the ACL, pages 160?167. ACL.
Sebastian Pado?, Daniel Cer, Michel Galley, Dan Jurafsky,
and Christopher D. Manning. 2009. Measuring ma-
chine translation quality as semantic equivalence: A
metric based on entailment features. Machine Trans-
lation, 23(2-3):181?193.
Kishore Papineni, Salim Roukos, Todd Ward, and Wie-
Jing Zhu. 2002. BLEU: a method for automatic eval-
uation of machine translation. In Proceedings of Asso-
ciation of Computational Linguistics, pages 311?318.
ACL.
Majid Razmara, George Foster, Baskaran Sankaran, and
Anoop Sarkar. 2012. Mixing multiple translation
models in statistical machine translation. In Proceed-
ings of the 50th Annual Meeting of the ACL, Jeju, Re-
public of Korea. ACL.
Baskaran Sankaran, Majid Razmara, and Anoop Sarkar.
2012. Kriya an end-to-end hierarchical phrase-based
mt system. The Prague Bulletin of Mathematical Lin-
guistics (PBML), 97(97):83?98.
Christophe Servan and Holger Schwenk. 2011. Optimis-
ing multiple metrics with mert. Prague Bull. Math.
Linguistics, 96:109?118.
Patrick Simianer, Stefan Riezler, and Chris Dyer. 2012.
Joint feature selection in distributed stochastic learn-
ing for large-scale discriminative training in smt. In
Proceedings of the 50th Annual Meeting of the Associ-
ation for Computational Linguistics (Volume 1: Long
Papers), pages 11?21, Jeju Island, Korea. ACL.
Matthew Snover, Bonnie Dorr, Richard Schwartz, Lin-
nea Micciulla, and John Makhoul. 2006. A study of
translation edit rate with targeted human annotation.
In Proceedings of Association for Machine Translation
in the Americas, pages 223?231.
Valentin I. Spitkovsky, Hiyan Alshawi, and Daniel Juraf-
sky. 2011. Lateen EM: Unsupervised training with
multiple objectives, applied to dependency grammar
induction. In Proceedings of the Empirical Methods in
Natural Language Processing, pages 1269?1280. As-
sociation of Computational Linguistics.
Taro Watanabe, Jun Suzuki, Hajime Tsukada, and Hideki
Isozaki. 2007. Online large-margin training for sta-
tistical machine translation. In Proceedings of the
2007 Joint Conference on Empirical Methods in Nat-
ural Language Processing and Computational Natu-
ral Language Learning (EMNLP-CoNLL), pages 764?
773. ACL.
Taro Watanabe. 2012. Optimized online rank learn-
ing for machine translation. In Proceedings of the
2012 Conference of the North American Chapter of the
ACL: Human Language Technologies, pages 253?262,
Montre?al, Canada, June. ACL.
Omar F. Zaidan. 2009. Z-MERT: A fully configurable
open source tool for minimum error rate training of
machine translation systems. The Prague Bulletin of
Mathematical Linguistics, 91:79?88.
Daqi Zheng, Yifan He, Yang Liu, and Qun Liu. 2012.
Maximum rank correlation training for statistical ma-
chine translation. In MT Summit XIII.
957
